<!DOCTYPE html>
<html>
<head>
    <title>dandelioning</title>
    <meta charset="utf-8" />
    <style type="text/css">
        #container {
            max-width: 720px;
            width: 90%;
            margin: 0 auto;
        }
    </style>
</head>
<body>
<script type="text/javascript">
    function get_request(url) {
        var request = new XMLHttpRequest();

        request.onreadystatechange = function() {
            if (request.readyState == 4) {
                console.log(JSON.parse(request.responseText));
            }
        };

        request.open('POST', url);

        return request;
    }

    function update() {
        var status = document.getElementById('status').value;

        if (!status) {
            alert("Please type something before.");
        } else {
            request = get_request('/_/update');
            request.setRequestHeader('status', status);
            request.send();
        }
    }
</script>
<div id="main-container">
    <div id="container">
        <ul>
            {% for provider in accounts %}
            <li>
                {% if not accounts[provider] %}
                <a href="/auth/1/{{ provider }}">Login with {{ provider }}</a>
                {% else %}
                <a href="#">Logged with {{ provider }}</a>
                {% end if %}
            </li>
            {% end for %}
        </ul>
        <textarea id="status" placeholder="Type something to update..."></textarea>
        <a href="#" onclick="update();">update</a>
    </div>
</div>
</body>
</html>
